<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Materias - UNAH Systems</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="stylesheet" href="../../assets/css/registrationModule/dashboard.css">

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"/>
</head>

<body>

<aside class="sidebar">
    <div class="brand text-center py-3">
        <img src="../../assets/unah_logo.png" width="70" class="mb-2">
        <h5 class="fw-bold text-white mb-0">UNAH Systems</h5>
    </div>

    <nav class="px-3 mt-4">
        <a href="dashboard.html" class="nav-link"><i class="bi bi-speedometer2 me-2"></i> Dashboard</a>
        <a href="periods.html" class="nav-link"><i class="bi bi-calendar-range me-2"></i> Periodos</a>
        <a href="subjects.html" class="nav-link active"><i class="bi bi-journal-bookmark me-2"></i> Materias</a>
        <a href="pensum.html" class="nav-link"><i class="bi bi-journal-bookmark me-2"></i> Pensum</a>
        <a href="sections.html" class="nav-link"><i class="bi bi-grid-3x3-gap-fill me-2"></i> Secciones</a>
        <a href="enrollmentAdmin.html" class="nav-link"><i class="bi bi-clipboard-check me-2"></i> Matrícula Admin</a>
        <a href="../../index.php" class="nav-link text-danger"><i class="bi bi-box-arrow-right me-2"></i> Atras</a>
    </nav>
</aside>

<main class="main-content">

    <h2 class="fw-bold mb-4">Gestión de Materias</h2>

    <ul class="nav nav-tabs mb-4" id="subjectTabs">
        <li class="nav-item">
            <a class="nav-link active" data-tab="tab-subjects">Materias</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="tab-prerequisites">Prerrequisitos</a>
        </li>
    </ul>

    <div id="tab-subjects">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="fw-bold">Listado de Materias</h4>

            <button class="btn btn-primary" id="btnNewSubject">
                <i class="bi bi-plus-circle"></i> Nueva Materia
            </button>
        </div>

        <div class="card shadow-sm mb-4 p-3">
            <div class="row g-3">

                <div class="col-md-4">
                    <label class="form-label fw-bold">Buscar</label>
                    <input type="text" id="searchInput" class="form-control"
                           placeholder="Código o nombre...">
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-bold">Departamento</label>
                    <select id="filterDepartment" class="form-select"></select>
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-bold">Modo de Búsqueda</label>
                    <select id="filterMode" class="form-select">
                        <option value="all">Buscar en todas</option>
                        <option value="dept">Buscar sólo en este depto</option>
                    </select>
                </div>

            </div>
        </div>

        <table class="table table-bordered table-striped">
            <thead class="table-dark">
            <tr>
                <th>#</th>
                <th>Código</th>
                <th>Nombre</th>
                <th>UV</th>
                <th>Departamento</th>
                <th style="width:150px;">Acciones</th>
            </tr>
            </thead>
            <tbody id="subjectsTable"></tbody>
        </table>

    </div>

    <div id="tab-prerequisites" style="display:none;">

        <h4 class="fw-bold mb-3">Gestión de Prerrequisitos</h4>

        <div class="card shadow-sm mb-3">
            <div class="card-body">

                <label class="form-label fw-bold">Seleccione la materia:</label>

                <div class="row g-3">

                    <div class="col-md-6">
                        <select id="smartDepartment" class="form-select">
                            <option value="">Todos los departamentos</option>
                        </select>
                    </div>

                </div>

                <div class="mt-3">
                    <select id="prereqMainSubject" class="form-select"></select>
                </div>

            </div>
        </div>

        <div class="row">

            <div class="col-md-6">
                <div class="card shadow-sm mb-3">
                    <div class="card-body">
                        <div class="col-md-9">
                        <input type="text" id="smartSearch" class="form-control"
                               placeholder="Buscar por código, nombre o departamento">
                         </div>
                        <h5 class="fw-bold mb-3">Materias disponibles</h5>

                        <div id="prAvailableList" class="scroll-box"></div>

                        <button class="btn btn-primary w-100 mt-3" onclick="savePrerequisites()">
                            Guardar requisitos
                        </button>

                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card shadow-sm mb-3">
                    <div class="card-body">

                        <h5 class="fw-bold mb-3">Prerrequisitos actuales</h5>

                        <div id="prCurrentList" class="scroll-box">
                            <p class="text-muted">Seleccione una materia</p>
                        </div>

                    </div>
                </div>
            </div>

        </div>

    </div>

</main>

<!-- MODAL CREAR -->
<div class="modal fade" id="modalCreateSubject" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Nueva Materia</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">

                <div class="mb-3">
                    <label class="form-label fw-bold">Código</label>
                    <input type="text" class="form-control" id="createCode">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Nombre</label>
                    <input type="text" class="form-control" id="createName">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">UV</label>
                    <input type="number" min="1" max="8" class="form-control" id="createUv">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Departamento</label>
                    <select id="createDepartment" class="form-select"></select>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button class="btn btn-primary" id="btnSaveCreate">Guardar</button>
            </div>

        </div>
    </div>
</div>

<!-- MODAL EDITAR -->
<div class="modal fade" id="modalEditSubject" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header bg-warning">
                <h5 class="modal-title">Editar Materia</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">

                <input type="hidden" id="editId">

                <div class="mb-3">
                    <label class="form-label fw-bold">Código</label>
                    <input type="text" class="form-control" id="editCode">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Nombre</label>
                    <input type="text" class="form-control" id="editName">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">UV</label>
                    <input type="number" class="form-control" id="editUv">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Departamento</label>
                    <select id="editDepartment" class="form-select"></select>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button class="btn btn-warning" id="btnSaveEdit">Actualizar</button>
            </div>

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<script src="../../assets/js/registrationModule/subjects.js"></script>

</body>
</html>
